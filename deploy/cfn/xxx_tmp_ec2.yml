# Code generated by Makefile. DO NOT EDIT.

AWSTemplateFormatVersion: '2010-09-09'
Transform: AWS::Serverless-2016-10-31
Parameters:
  Prefix:
    Type: String
  Env:
    Type: String
  SubnetPubA:
    Type: String
  SubnetPriAppA:
    Type: String
  SecurityGroupK8sMaster:
    Type: String
  SecurityGroupK8sWorker:
    Type: String
  ImageIdAmazonLinux:
    Type: String
Resources:
  InstanceMaster1:
    Type: AWS::EC2::Instance
    Properties:
      ImageId:
        Ref: ImageIdAmazonLinux
      InstanceType: t3.small
      NetworkInterfaces:
        - AssociatePublicIpAddress: true
          DeviceIndex: 0
          SubnetId:
            Ref: SubnetPubA
          GroupSet:
            - Ref: SecurityGroupK8sMaster
      Tags:
        - Key: Name
          Value:
            Fn::Sub: ${Prefix}-Master1
  InstanceNode1:
    Type: AWS::EC2::Instance
    Properties:
      ImageId:
        Ref: ImageIdAmazonLinux
      InstanceType: t3.small
      SubnetId:
        Ref: SubnetPriAppA
      SecurityGroupIds:
        - Ref: SecurityGroupK8sWorker
      Tags:
        - Key: Name
          Value:
            Fn::Sub: ${Prefix}-Node1
  InstanceNode2:
    Type: AWS::EC2::Instance
    Properties:
      ImageId:
        Ref: ImageIdAmazonLinux
      InstanceType: t3.small
      SubnetId:
        Ref: SubnetPriAppA
      SecurityGroupIds:
        - Ref: SecurityGroupK8sWorker
      Tags:
        - Key: Name
          Value:
            Fn::Sub: ${Prefix}-Node2
Outputs:
  InstanceMaster1:
    Value:
      Ref: InstanceMaster1
    Export:
      Name:
        Fn::Sub: ${Prefix}-InstanceMaster1
  InstanceNode1:
    Value:
      Ref: InstanceNode1
    Export:
      Name:
        Fn::Sub: ${Prefix}-InstanceNode1
  InstanceNode2:
    Value:
      Ref: InstanceNode2
    Export:
      Name:
        Fn::Sub: ${Prefix}-InstanceNode2
