# Code generated by Makefile. DO NOT EDIT.

AWSTemplateFormatVersion: '2010-09-09'
Transform: AWS::Serverless-2016-10-31
Parameters:
  Prefix:
    Type: String
  Env:
    Type: String
  SubnetPubA:
    Type: String
  SecurityGroupRouter:
    Type: String
  SecurityGroupApp:
    Type: String
  ImageIdAmazonLinux:
    Type: String
Resources:
  InstanceRouter1:
    Type: AWS::EC2::Instance
    Properties:
      ImageId:
        Ref: ImageIdAmazonLinux
      InstanceType: t3.small
      SubnetId:
        Ref: SubnetPubA
      SecurityGroupIds:
        - Ref: SecurityGroupRouter
      Tags:
        - Key: Name
          Value:
            Fn::Sub: ${Prefix}-Router1
  InstanceApp1:
    Type: AWS::EC2::Instance
    Properties:
      ImageId:
        Ref: ImageIdAmazonLinux
      InstanceType: t3.small
      SubnetId:
        Ref: SubnetPubA
      SecurityGroupIds:
        - Ref: SecurityGroupRouter
      Tags:
        - Key: Name
          Value:
            Fn::Sub: ${Prefix}-App1
  InstanceApp2:
    Type: AWS::EC2::Instance
    Properties:
      ImageId:
        Ref: ImageIdAmazonLinux
      InstanceType: t3.small
      SubnetId:
        Ref: SubnetPubA
      SecurityGroupIds:
        - Ref: SecurityGroupRouter
      Tags:
        - Key: Name
          Value:
            Fn::Sub: ${Prefix}-App2
Outputs:
  InstanceRouter1:
    Value:
      Ref: InstanceRouter1
    Export:
      Name:
        Fn::Sub: ${Prefix}-InstanceRouter1
  InstanceApp1:
    Value:
      Ref: InstanceApp1
    Export:
      Name:
        Fn::Sub: ${Prefix}-InstanceApp1
  InstanceApp2:
    Value:
      Ref: InstanceApp2
    Export:
      Name:
        Fn::Sub: ${Prefix}-InstanceApp2
